{"version":3,"sources":["../src/web.ts","../src/tauri.ts","../src/detect.ts"],"sourcesContent":["import type {\n  DeviceAdapter,\n  SerialPort,\n  UploadResult,\n  PlatformCapabilities,\n  UploadProgressCallback,\n  CoreInfo,\n  BoardInfo,\n  CoreStatus,\n} from './types';\n\n\nexport class WebAdapter implements DeviceAdapter {\n  getPlatform(): 'web' | 'tauri' {\n    return 'web';\n  }\n\n  getCapabilities(): PlatformCapabilities {\n    return {\n      canListPorts: this.hasWebSerial(),\n      canUpload: false, // Not implemented yet\n      canAutoDetectBoard: false,\n      supportsProgress: false,\n    };\n  }\n\n  /**\n   * Check if Web Serial API is available\n   */\n  private hasWebSerial(): boolean {\n    return 'serial' in navigator;\n  }\n\n  /**\n   * List serial ports using Web Serial API\n   * Note: Requires user permission and HTTPS\n   */\n  async listPorts(): Promise<SerialPort[]> {\n    if (!this.hasWebSerial()) {\n      console.warn('Web Serial API not available in this browser');\n      return [];\n    }\n\n    try {\n      const ports = await (navigator as any).serial.getPorts();\n      return ports.map((port: any) => ({\n        path: port.toString(),\n        manufacturer: port.getInfo?.()?.usbVendorId?.toString(),\n        vendorId: port.getInfo?.()?.usbVendorId?.toString(16),\n        productId: port.getInfo?.()?.usbProductId?.toString(16),\n      }));\n    } catch (error) {\n      console.error('Failed to list serial ports:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Verify/compile code\n   * Not supported in browser without backend service\n   */\n  async compile(code: string, board: string): Promise<UploadResult> {\n    return {\n      success: false,\n      error: 'Code verification not supported in browser. Please use the desktop app.',\n    };\n  }\n\n  /**\n   * Upload code to Arduino\n   * Not supported in browser without backend service\n   */\n  async upload(\n    port: string,\n    code: string,\n    board: string,\n    onProgress?: UploadProgressCallback\n  ): Promise<UploadResult> {\n    return {\n      success: false,\n      error: 'Upload not supported in browser. Please use the desktop app or a cloud service.',\n    };\n  }\n\n  /**\n   * Export project file using Download API\n   */\n  async exportProject(name: string, content: string): Promise<void> {\n    const blob = new Blob([content], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${name}.hduino`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }\n\n  /**\n   * Import project file using File Picker API\n   */\n  async importProject(): Promise<{ name: string; content: string } | null> {\n    return new Promise((resolve) => {\n      const input = document.createElement('input');\n      input.type = 'file';\n      input.accept = '.hduino,application/json';\n      input.onchange = async (e: Event) => {\n        const file = (e.target as HTMLInputElement).files?.[0];\n        if (!file) {\n          resolve(null);\n          return;\n        }\n\n        try {\n          const content = await file.text();\n          const name = file.name.replace(/\\.hduino$/, '');\n          resolve({ name, content });\n        } catch (error) {\n          console.error('Failed to read project file:', error);\n          resolve(null);\n        }\n      };\n      input.oncancel = () => resolve(null);\n      input.click();\n    });\n  }\n\n  // ========== Core Management (Not available in browser) ==========\n\n  async checkArduinoCli(): Promise<boolean> {\n    return false;\n  }\n\n  async getArduinoCliVersion(): Promise<string> {\n    return 'Not available in browser';\n  }\n\n  async listInstalledCores(): Promise<CoreInfo[]> {\n    return [];\n  }\n\n  async listInstalledBoards(): Promise<BoardInfo[]> {\n    return [];\n  }\n\n  async checkCoreStatus(_boardFqbn: string): Promise<CoreStatus> {\n    return {\n      coreId: '',\n      installed: false,\n      bundled: false,\n    };\n  }\n\n  async installCore(_coreId: string): Promise<string> {\n    throw new Error('Core installation not available in browser. Please use the desktop app.');\n  }\n\n  async searchCores(_query: string): Promise<CoreInfo[]> {\n    return [];\n  }\n\n  async getBundledCores(): Promise<string[]> {\n    return [];\n  }\n}\n","/**\n * Tauri adapter for native desktop functionality\n * Uses Tauri's invoke API to call Rust commands\n */\n\nimport type {\n  DeviceAdapter,\n  SerialPort,\n  UploadResult,\n  PlatformCapabilities,\n  UploadProgressCallback,\n  CoreInfo,\n  BoardInfo,\n  CoreStatus,\n} from './types';\n\n/**\n * Compile progress event from Rust backend\n */\ninterface CompileProgressEvent {\n  stage: string;\n  percent: number;\n  message: string;\n}\n\n/**\n * Tauri invoke function type\n */\ntype InvokeFunction = <T>(cmd: string, args?: Record<string, unknown>) => Promise<T>;\n\n/**\n * Get Tauri invoke function\n * Supports both Tauri v1 and v2 APIs\n */\nfunction getInvoke(): InvokeFunction {\n  const tauri = (window as any).__TAURI__;\n\n  if (!tauri) {\n    throw new Error('Tauri API not available');\n  }\n\n  // Tauri v2: invoke is in core module\n  if (tauri.core?.invoke) {\n    return tauri.core.invoke;\n  }\n\n  // Tauri v1: invoke is in tauri module\n  if (tauri.tauri?.invoke) {\n    return tauri.tauri.invoke;\n  }\n\n  // Direct invoke (older Tauri versions)\n  if (typeof tauri.invoke === 'function') {\n    return tauri.invoke;\n  }\n\n  throw new Error('Could not find Tauri invoke function');\n}\n\n/**\n * Invoke a Tauri command\n */\nasync function invoke<T>(cmd: string, args?: Record<string, unknown>): Promise<T> {\n  const invokeFn = getInvoke();\n  return invokeFn<T>(cmd, args);\n}\n\n/**\n * Serial port info returned from Rust\n */\ninterface TauriSerialPortInfo {\n  path: string;\n  manufacturer: string | null;\n  vendor_id: string | null;\n  product_id: string | null;\n}\n\n/**\n * Project file returned from Rust\n */\ninterface TauriProjectFile {\n  name: string;\n  content: string;\n}\n\n/**\n * Tauri adapter for native desktop operations\n */\nexport class TauriAdapter implements DeviceAdapter {\n  getPlatform(): 'web' | 'tauri' {\n    return 'tauri';\n  }\n\n  getCapabilities(): PlatformCapabilities {\n    return {\n      canListPorts: true,\n      canUpload: true, // Enabled via Arduino CLI integration (Phase 8)\n      canAutoDetectBoard: false,\n      supportsProgress: true,\n    };\n  }\n\n  /**\n   * List available serial ports using native serialport library\n   */\n  async listPorts(): Promise<SerialPort[]> {\n    try {\n      const ports = await invoke<TauriSerialPortInfo[]>('list_ports');\n\n      return ports.map((port) => ({\n        path: port.path,\n        manufacturer: port.manufacturer ?? undefined,\n        vendorId: port.vendor_id ?? undefined,\n        productId: port.product_id ?? undefined,\n      }));\n    } catch (error) {\n      console.error('Failed to list serial ports:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Verify/compile code without uploading\n   */\n  async compile(code: string, board: string): Promise<UploadResult> {\n    try {\n      const result = await invoke<string>('compile_code', {\n        code,\n        board,\n      });\n\n      return {\n        success: true,\n        stage: 'compile',\n        message: 'Compilation successful!\\n\\nBuild output: ' + result,\n      };\n    } catch (error) {\n      // Log the full error object for debugging\n      console.error('Compilation failed - Full error:', error);\n      console.error('Error type:', typeof error);\n      console.error('Error keys:', error && typeof error === 'object' ? Object.keys(error) : 'N/A');\n\n      // Extract error message from Tauri error\n      let errorMessage = 'Unknown compilation error';\n\n      if (typeof error === 'string') {\n        // Simple string error\n        errorMessage = error;\n      } else if (error && typeof error === 'object') {\n        // Try different error properties that Tauri might use\n        const err = error as any;\n\n        if (err.message) {\n          errorMessage = err.message;\n        } else if (err.error) {\n          errorMessage = err.error;\n        } else if (err.toString && err.toString() !== '[object Object]') {\n          errorMessage = err.toString();\n        } else {\n          // Last resort: stringify the entire object\n          errorMessage = JSON.stringify(error, null, 2);\n        }\n      }\n\n      console.error('Extracted error message:', errorMessage);\n\n      return {\n        success: false,\n        stage: 'compile',\n        error: errorMessage,\n      };\n    }\n  }\n\n  /**\n   * Upload code to Arduino using arduino-cli\n   * Compiles and uploads in a single operation with progress reporting\n   */\n  async upload(\n    port: string,\n    code: string,\n    board: string,\n    onProgress?: UploadProgressCallback\n  ): Promise<UploadResult> {\n    // Set up event listener for progress updates\n    let unlisten: (() => void) | undefined;\n\n    try {\n      // Listen for compile-progress events from Rust backend\n      if (onProgress) {\n        const tauri = (window as any).__TAURI__;\n        if (tauri?.event?.listen) {\n          unlisten = await tauri.event.listen(\n            'compile-progress',\n            (event: { payload: CompileProgressEvent }) => {\n              const { stage, percent } = event.payload;\n              onProgress(stage as 'compiling' | 'uploading', percent);\n            }\n          );\n        }\n      }\n\n      // Call the Rust upload_code command\n      const result = await invoke<UploadResult>('upload_code', {\n        port,\n        code,\n        board,\n      });\n\n      return result;\n    } catch (error) {\n      console.error('Upload failed:', error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n      };\n    } finally {\n      // Clean up event listener\n      if (unlisten) {\n        unlisten();\n      }\n    }\n  }\n\n  /**\n   * Check if arduino-cli is available\n   */\n  async checkArduinoCli(): Promise<boolean> {\n    try {\n      return await invoke<boolean>('check_arduino_cli');\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get arduino-cli version\n   */\n  async getArduinoCliVersion(): Promise<string> {\n    try {\n      return await invoke<string>('get_arduino_cli_version');\n    } catch {\n      return 'Not available';\n    }\n  }\n\n  /**\n   * List installed Arduino cores\n   */\n  async listInstalledCores(): Promise<CoreInfo[]> {\n    try {\n      const cores = await invoke<Array<{\n        id: string;\n        installed: string;\n        latest: string;\n        name: string;\n      }>>('list_installed_cores');\n      return cores;\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * List installed Arduino boards\n   */\n  async listInstalledBoards(): Promise<BoardInfo[]> {\n    try {\n      const boards = await invoke<Array<{\n        name: string;\n        fqbn: string;\n      }>>('list_installed_boards');\n      return boards;\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Check if a core is installed for a board FQBN\n   */\n  async checkCoreStatus(boardFqbn: string): Promise<CoreStatus> {\n    try {\n      const status = await invoke<{\n        core_id: string;\n        installed: boolean;\n        bundled: boolean;\n      }>('check_core_status', { boardFqbn });\n      return {\n        coreId: status.core_id,\n        installed: status.installed,\n        bundled: status.bundled,\n      };\n    } catch {\n      return {\n        coreId: '',\n        installed: false,\n        bundled: false,\n      };\n    }\n  }\n\n  /**\n   * Install an Arduino core\n   */\n  async installCore(coreId: string): Promise<string> {\n    return await invoke<string>('install_core', { coreId });\n  }\n\n  /**\n   * Search for available cores\n   */\n  async searchCores(query: string): Promise<CoreInfo[]> {\n    try {\n      const cores = await invoke<Array<{\n        id: string;\n        installed: string;\n        latest: string;\n        name: string;\n      }>>('search_cores', { query });\n      return cores;\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Get list of bundled cores\n   */\n  async getBundledCores(): Promise<string[]> {\n    try {\n      return await invoke<string[]>('get_bundled_cores');\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Export project file using native save dialog\n   */\n  async exportProject(name: string, content: string): Promise<void> {\n    try {\n      const saved = await invoke<boolean>('save_file_dialog', { name, content });\n\n      if (!saved) {\n        // User cancelled the dialog - this is not an error\n        console.log('Export cancelled by user');\n      }\n    } catch (error) {\n      console.error('Failed to export project:', error);\n      throw new Error(`Failed to export project: ${error}`);\n    }\n  }\n\n  /**\n   * Import project file using native open dialog\n   */\n  async importProject(): Promise<{ name: string; content: string } | null> {\n    try {\n      const result = await invoke<TauriProjectFile | null>('open_file_dialog');\n\n      if (!result) {\n        // User cancelled the dialog\n        return null;\n      }\n\n      return {\n        name: result.name,\n        content: result.content,\n      };\n    } catch (error) {\n      console.error('Failed to import project:', error);\n      return null;\n    }\n  }\n}\n\n/**\n * Emit app-ready event to Tauri backend\n * Signals that the app is fully loaded and ready to show\n */\nexport function emitAppReady(): void {\n  if (typeof window !== 'undefined') {\n    const tauri = (window as any).__TAURI__;\n    if (tauri?.event?.emit) {\n      tauri.event.emit('app-ready');\n    }\n  }\n}\n","/**\n * Platform detection and adapter selection\n */\n\nimport type { DeviceAdapter } from './types';\nimport { WebAdapter } from './web';\nimport { TauriAdapter } from './tauri';\n\n// Cached adapter instance\nlet cachedAdapter: DeviceAdapter | null = null;\n\n/**\n * Detect the current platform and return appropriate adapter\n * Creates a new adapter instance each time (use getAdapter for cached version)\n * @returns The platform-specific device adapter\n */\nexport function detectAdapter(): DeviceAdapter {\n  // Check if running in Tauri (desktop app)\n  if (typeof window !== 'undefined' && (window as any).__TAURI__) {\n    return new TauriAdapter();\n  }\n\n  // Default to web adapter (browser/PWA)\n  return new WebAdapter();\n}\n\n/**\n * Get the cached adapter instance\n * Creates and caches the adapter on first call\n * @returns The cached platform-specific device adapter\n */\nexport function getAdapter(): DeviceAdapter {\n  if (!cachedAdapter) {\n    cachedAdapter = detectAdapter();\n  }\n  return cachedAdapter;\n}\n\n/**\n * Check if running in Tauri desktop app\n */\nexport function isTauri(): boolean {\n  return typeof window !== 'undefined' && !!(window as any).__TAURI__;\n}\n\n/**\n * Check if running in web browser\n */\nexport function isWeb(): boolean {\n  return !isTauri();\n}\n"],"mappings":"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","names":[]}