{"version":3,"sources":["../src/arduino/types.ts","../src/arduino/boards.ts"],"sourcesContent":["import * as Blockly from 'blockly/core';\n\n/**\n * Type class for Arduino type system\n */\nexport class ArduinoType {\n  typeId: string;\n  typeMsgName: string;\n  compatibleTypes: ArduinoType[];\n\n  constructor(config: { typeId: string; typeMsgName: string; compatibleTypes?: ArduinoType[] }) {\n    this.typeId = config.typeId;\n    this.typeMsgName = config.typeMsgName;\n    this.compatibleTypes = config.compatibleTypes || [];\n  }\n\n  get typeName(): string {\n    return this.typeMsgName;\n  }\n\n  addCompatibleTypes(types: ArduinoType[]): void {\n    this.compatibleTypes.push(...types);\n  }\n}\n\n/**\n * Arduino type definitions\n */\nexport const Types = {\n  /** Const integer number */\n  CONST_NUMBER: new ArduinoType({\n    typeId: 'Const Number',\n    typeMsgName: 'NUMBER',\n  }),\n\n  /** Character */\n  CHARACTER: new ArduinoType({\n    typeId: 'Character',\n    typeMsgName: 'CHAR',\n  }),\n\n  /** Text string */\n  TEXT: new ArduinoType({\n    typeId: 'Text',\n    typeMsgName: 'TEXT',\n  }),\n\n  /** Boolean */\n  BOOLEAN: new ArduinoType({\n    typeId: 'Boolean',\n    typeMsgName: 'BOOL',\n  }),\n\n  /** Short integer number */\n  SHORT_NUMBER: new ArduinoType({\n    typeId: 'Short Number',\n    typeMsgName: 'SHORT',\n  }),\n\n  /** Integer number */\n  NUMBER: new ArduinoType({\n    typeId: 'Number',\n    typeMsgName: 'NUMBER',\n  }),\n\n  /** Unsigned integer number */\n  UNS_NUMBER: new ArduinoType({\n    typeId: 'Unsigned number',\n    typeMsgName: 'UNS_NUMBER',\n  }),\n\n  /** Volatile integer number */\n  VOLATIL_NUMBER: new ArduinoType({\n    typeId: 'Volatil Number',\n    typeMsgName: 'VOLATILE',\n  }),\n\n  /** Large integer number */\n  LARGE_NUMBER: new ArduinoType({\n    typeId: 'Large Number',\n    typeMsgName: 'LONG',\n  }),\n\n  /** Large unsigned integer number */\n  LARGE_UNS_NUMBER: new ArduinoType({\n    typeId: 'Unsigned Large Number',\n    typeMsgName: 'UNS_LONG',\n  }),\n\n  /** Decimal/floating point number */\n  DECIMAL: new ArduinoType({\n    typeId: 'Decimal',\n    typeMsgName: 'DECIMAL',\n  }),\n\n  /** Array/List of items */\n  ARRAY: new ArduinoType({\n    typeId: 'Array',\n    typeMsgName: 'ARRAY',\n  }),\n\n  /** Null indicates there is no type */\n  NULL: new ArduinoType({\n    typeId: 'Null',\n    typeMsgName: 'NULL',\n  }),\n\n  /** Type not defined, or not yet defined */\n  UNDEF: new ArduinoType({\n    typeId: 'Undefined',\n    typeMsgName: 'UNDEF',\n  }),\n\n  /** Set when no child block (meant to define the variable type) is connected */\n  CHILD_BLOCK_MISSING: new ArduinoType({\n    typeId: 'ChildBlockMissing',\n    typeMsgName: 'CHILDBLOCKMISSING',\n  }),\n};\n\n// Setup circular dependencies after all types are defined\nTypes.TEXT.addCompatibleTypes([Types.CHARACTER]);\n\nTypes.UNS_NUMBER.addCompatibleTypes([Types.SHORT_NUMBER, Types.NUMBER]);\n\nTypes.LARGE_UNS_NUMBER.addCompatibleTypes([\n  Types.SHORT_NUMBER,\n  Types.NUMBER,\n  Types.LARGE_NUMBER,\n]);\n\nTypes.NUMBER.addCompatibleTypes([\n  Types.BOOLEAN,\n  Types.SHORT_NUMBER,\n  Types.LARGE_NUMBER,\n  Types.DECIMAL,\n]);\n\nTypes.CONST_NUMBER.addCompatibleTypes([\n  Types.BOOLEAN,\n  Types.SHORT_NUMBER,\n  Types.LARGE_NUMBER,\n  Types.DECIMAL,\n]);\n\nTypes.UNS_NUMBER.addCompatibleTypes([\n  Types.BOOLEAN,\n  Types.SHORT_NUMBER,\n  Types.NUMBER,\n  Types.DECIMAL,\n]);\n\nTypes.SHORT_NUMBER.addCompatibleTypes([\n  Types.BOOLEAN,\n  Types.NUMBER,\n  Types.DECIMAL,\n]);\n\nTypes.LARGE_NUMBER.addCompatibleTypes([\n  Types.BOOLEAN,\n  Types.SHORT_NUMBER,\n  Types.UNS_NUMBER,\n  Types.NUMBER,\n  Types.DECIMAL,\n]);\n\nTypes.LARGE_UNS_NUMBER.addCompatibleTypes([\n  Types.BOOLEAN,\n  Types.SHORT_NUMBER,\n  Types.UNS_NUMBER,\n  Types.NUMBER,\n  Types.LARGE_NUMBER,\n  Types.DECIMAL,\n]);\n\nTypes.VOLATIL_NUMBER.addCompatibleTypes([\n  Types.SHORT_NUMBER,\n  Types.LARGE_NUMBER,\n  Types.UNS_NUMBER,\n  Types.NUMBER,\n]);\n\nTypes.DECIMAL.addCompatibleTypes([\n  Types.BOOLEAN,\n  Types.SHORT_NUMBER,\n  Types.NUMBER,\n  Types.LARGE_NUMBER,\n]);\n\n/**\n * Convert Arduino type to C++ type string\n */\nexport function getArduinoType(typeBlockly: ArduinoType): string {\n  switch (typeBlockly.typeId) {\n    case Types.CONST_NUMBER.typeId:\n      return 'const int';\n    case Types.SHORT_NUMBER.typeId:\n      return 'char';\n    case Types.NUMBER.typeId:\n      return 'int';\n    case Types.UNS_NUMBER.typeId:\n      return 'unsigned int';\n    case Types.LARGE_NUMBER.typeId:\n      return 'long';\n    case Types.LARGE_UNS_NUMBER.typeId:\n      return 'unsigned long';\n    case Types.DECIMAL.typeId:\n      return 'float';\n    case Types.TEXT.typeId:\n      return 'String';\n    case Types.VOLATIL_NUMBER.typeId:\n      return 'volatile';\n    case Types.CHARACTER.typeId:\n      return 'char';\n    case Types.BOOLEAN.typeId:\n      return 'boolean';\n    case Types.NULL.typeId:\n      return 'void';\n    case Types.UNDEF.typeId:\n      return 'undefined';\n    case Types.CHILD_BLOCK_MISSING.typeId:\n      return 'int';\n    default:\n      return 'Invalid Blockly Type';\n  }\n}\n\n/**\n * Get valid type array for dropdowns\n */\nexport function getValidTypeArray(): [string, string][] {\n  const typesArray: [string, string][] = [];\n  const excludedTypes = ['UNDEF', 'CHILD_BLOCK_MISSING', 'NULL', 'ARRAY'];\n\n  for (const [key, value] of Object.entries(Types)) {\n    if (!excludedTypes.includes(key) && value instanceof ArduinoType) {\n      typesArray.push([value.typeName, key]);\n    }\n  }\n\n  return typesArray;\n}\n\n/**\n * Regular expression to identify an integer\n */\nconst regExpInt = /^-?\\d+$/;\n\n/**\n * Regular expression to identify a decimal\n */\nconst regExpFloat = /^-?[0-9]*[.][0-9]+$/;\n\n/**\n * Identify if a number string is an integer or floating point\n */\nexport function identifyNumber(numberString: string): ArduinoType {\n  if (regExpInt.test(numberString)) {\n    const intValue = parseInt(numberString);\n    if (isNaN(intValue)) {\n      return Types.NULL;\n    }\n    if (intValue > 32767 || intValue < -32768) {\n      return Types.LARGE_NUMBER;\n    }\n    return Types.NUMBER;\n  } else if (regExpFloat.test(numberString)) {\n    return Types.DECIMAL;\n  }\n  return Types.NULL;\n}\n\n/**\n * Navigate through child blocks to get the block type\n */\nexport function getChildBlockType(block: Blockly.Block): ArduinoType {\n  let blockType: ArduinoType;\n  let nextBlock: Blockly.Block | null = block;\n\n  // Only checks first input block, so it decides the type\n  while (\n    nextBlock &&\n    !(nextBlock as any).getBlockType &&\n    nextBlock.inputList.length > 0 &&\n    nextBlock.inputList[0].connection != null\n  ) {\n    nextBlock = nextBlock.inputList[0].connection.targetBlock();\n  }\n\n  if (nextBlock === block) {\n    // Set variable block is empty, so no type yet\n    blockType = Types.CHILD_BLOCK_MISSING;\n  } else if (nextBlock === null) {\n    // Null return from targetBlock indicates no block connected\n    blockType = Types.CHILD_BLOCK_MISSING;\n  } else {\n    const func = (nextBlock as any).getBlockType;\n    if (func) {\n      blockType = func.call(nextBlock);\n    } else {\n      // Most inner block, supposed to define a type, is missing getBlockType()\n      blockType = Types.NULL;\n    }\n  }\n\n  return blockType;\n}\n\n/**\n * Static typing class for collecting and managing variable types\n */\nexport class StaticTyping {\n  private varTypeDict: Record<string, any> = {};\n  private pendingVarTypeDict: Record<string, string[]> = {};\n\n  /**\n   * Collect all variables with their types from workspace\n   */\n  collectVarsWithTypes(workspace: Blockly.Workspace): Record<string, any> {\n    this.varTypeDict = Object.create(null);\n    this.pendingVarTypeDict = Object.create(null);\n\n    const blocks = StaticTyping.getAllStatementsOrdered(workspace);\n\n    for (let i = 0; i < blocks.length; i++) {\n      const blockVarAndTypes = StaticTyping.getBlockVars(blocks[i]);\n\n      for (let j = 0; j < blockVarAndTypes.length; j++) {\n        let variableName = blockVarAndTypes[j][0];\n        let variableType = blockVarAndTypes[j][1];\n\n        // Handle indirect type definitions\n        if (Array.isArray(variableType)) {\n          if (variableType[1].endsWith('_AGI')) {\n            const varAGI = variableType[1].substring(0, variableType[1].lastIndexOf('_'));\n            variableType = this.varTypeDict[varAGI] || Types.UNDEF;\n\n            if (variableType?.arrayType) {\n              if (Array.isArray(variableType.arrayType) && variableType.arrayType.length === 2) {\n                variableType = this.varTypeDict[variableType.arrayType[1]];\n              } else {\n                variableType = variableType.arrayType;\n              }\n            }\n          } else {\n            if (this.varTypeDict[variableType[1]]) {\n              variableType = this.varTypeDict[variableType[1]];\n            } else {\n              // Add to pending list\n              if (!Array.isArray(this.pendingVarTypeDict[variableType[1]])) {\n                this.pendingVarTypeDict[variableType[1]] = [variableName];\n              } else {\n                this.pendingVarTypeDict[variableType[1]].push(variableName);\n              }\n              variableType = Types.UNDEF;\n            }\n          }\n        }\n\n        this.assignTypeToVars(blocks[i], variableName, variableType);\n      }\n    }\n\n    return this.varTypeDict;\n  }\n\n  /**\n   * Get all statement blocks ordered from workspace\n   */\n  static getAllStatementsOrdered(workspace: Blockly.Workspace): Blockly.Block[] {\n    const getAllContinuousStatements = (startBlock: Blockly.Block): Blockly.Block[] => {\n      let block: Blockly.Block | null = startBlock;\n      const blocks: Blockly.Block[] = [];\n\n      do {\n        blocks.push(block);\n        const blockNextConnection = block.nextConnection;\n        const connections = (block as any).getConnections_();\n        block = null;\n\n        for (let j = 0; j < connections.length; j++) {\n          if (connections[j].type === Blockly.NEXT_STATEMENT) {\n            const nextBlock = connections[j].targetBlock();\n            if (nextBlock) {\n              if (connections[j] === blockNextConnection) {\n                block = nextBlock;\n              } else {\n                blocks.push(...getAllContinuousStatements(nextBlock));\n              }\n            }\n          }\n        }\n      } while (block);\n\n      return blocks;\n    };\n\n    const allStatementBlocks: Blockly.Block[] = [];\n    const topBlocks = workspace.getTopBlocks(true);\n\n    for (let i = 0; i < topBlocks.length; i++) {\n      allStatementBlocks.push(...getAllContinuousStatements(topBlocks[i]));\n    }\n\n    return allStatementBlocks;\n  }\n\n  /**\n   * Get variables and their types from a block\n   */\n  static getBlockVars(block: Blockly.Block): [string, any][] {\n    const blockVarAndTypes: [string, any][] = [];\n    const getVars = (block as any).getVars;\n\n    if (getVars) {\n      const blockVariables = getVars.call(block);\n\n      for (let i = 0; i < blockVariables.length; i++) {\n        const varName = blockVariables[i];\n        const getVarType = (block as any).getVarType;\n\n        if (getVarType) {\n          const varType = getVarType.call(block, varName);\n          blockVarAndTypes.push([varName, varType]);\n        } else {\n          blockVarAndTypes.push([varName, Types.NULL]);\n        }\n      }\n    }\n\n    return blockVarAndTypes;\n  }\n\n  /**\n   * Assign type to variable in the type dictionary\n   */\n  private assignTypeToVars(block: Blockly.Block, varName: string, varType: any): void {\n    const currentType = this.varTypeDict[varName];\n\n    if (currentType === undefined || currentType === Types.UNDEF) {\n      this.varTypeDict[varName] = varType;\n\n      if (varType !== Types.UNDEF && this.pendingVarTypeDict[varName] !== undefined) {\n        for (let i = 0; i < this.pendingVarTypeDict[varName].length; i++) {\n          this.assignTypeToVars(block, this.pendingVarTypeDict[varName][i], varType);\n        }\n      }\n    } else {\n      this.setBlockTypeWarning(block, varType, varName);\n    }\n  }\n\n  /**\n   * Set warning on block for type mismatch\n   */\n  private setBlockTypeWarning(block: Blockly.Block, blockType: any, varName: string): void {\n    const warningLabel = 'varType';\n\n    if (\n      blockType === Types.CHILD_BLOCK_MISSING ||\n      this.varTypeDict[varName] === Types.CHILD_BLOCK_MISSING\n    ) {\n      block.setWarningText(null, warningLabel);\n    } else {\n      block.setWarningText(null, warningLabel);\n    }\n  }\n\n  /**\n   * Set procedure argument types\n   */\n  setProcedureArgs(workspace: Blockly.Workspace): void {\n    const blocks = workspace.getTopBlocks();\n\n    for (let i = 0; i < blocks.length; i++) {\n      const setArgsType = (blocks[i] as any).setArgsType;\n      if (setArgsType) {\n        setArgsType.call(blocks[i], this.varTypeDict);\n      }\n    }\n  }\n}\n","/**\n * Board profile interface for Arduino-compatible boards\n */\nexport interface BoardProfile {\n  name: string;\n  description: string;\n  compilerFlag: string;\n  image?: string; // Path to board image for UI\n  analogPins: [string, string][];\n  digitalPins: [string, string][]; // All pins that can be used as digital (includes analog pins on some boards)\n  pwmPins: [string, string][];\n  serial: [string, string][];\n  serialPins: Record<string, [string, string][]>;\n  serialSpeed: [string, string][];\n  spi: [string, string][];\n  spiPins: Record<string, [string, string][]>;\n  spiClockDivide?: [string, string][];\n  i2c: [string, string][];\n  i2cPins: Record<string, [string, string][]>;\n  i2cSpeed: [string, string][];\n  builtinLed: [string, string][];\n  interrupt: [string, string][];\n  bootloader?: string;\n  cpu?: string;\n  speed?: string;\n  picture?: string;\n  miniPicture?: string;\n  miniPicture_hor?: string;\n  upload_arg?: string;\n  help_link?: string;\n  builtinButton?: [string, string][];\n}\n\n/**\n * Generate digital I/O pin arrays\n */\nexport function generateDigitalIo(pinStart: number, pinEnd: number): [string, string][] {\n  const digitalIo: [string, string][] = [];\n  for (let i = pinStart; i <= pinEnd; i++) {\n    digitalIo.push([i.toString(), i.toString()]);\n  }\n  return digitalIo;\n}\n\n/**\n * Generate analog I/O pin arrays\n */\nexport function generateAnalogIo(pinStart: number, pinEnd: number): [string, string][] {\n  const analogIo: [string, string][] = [];\n  for (let i = pinStart; i <= pinEnd; i++) {\n    analogIo.push([`A${i}`, `A${i}`]);\n  }\n  return analogIo;\n}\n\n/**\n * Duplicate a board profile with new properties\n */\nexport function duplicateBoardProfile(\n  originalBoard: BoardProfile,\n  name: string,\n  description?: string,\n  compilerFlag?: string\n): BoardProfile {\n  return {\n    ...originalBoard,\n    name,\n    description: description || originalBoard.description,\n    compilerFlag: compilerFlag || originalBoard.compilerFlag,\n  };\n}\n\n/**\n * Common serial speed options\n */\nconst SERIAL_SPEEDS: [string, string][] = [\n  ['300', '300'],\n  ['600', '600'],\n  ['1200', '1200'],\n  ['2400', '2400'],\n  ['4800', '4800'],\n  ['9600', '9600'],\n  ['14400', '14400'],\n  ['19200', '19200'],\n  ['28800', '28800'],\n  ['31250', '31250'],\n  ['38400', '38400'],\n  ['57600', '57600'],\n  ['115200', '115200'],\n];\n\n/**\n * Common SPI clock divide options\n */\nconst SPI_CLOCK_DIVIDES: [string, string][] = [\n  ['2 (8MHz)', 'SPI_CLOCK_DIV2'],\n  ['4 (4MHz)', 'SPI_CLOCK_DIV4'],\n  ['8 (2MHz)', 'SPI_CLOCK_DIV8'],\n  ['16 (1MHz)', 'SPI_CLOCK_DIV16'],\n  ['32 (500KHz)', 'SPI_CLOCK_DIV32'],\n  ['64 (250KHz)', 'SPI_CLOCK_DIV64'],\n  ['128 (125KHz)', 'SPI_CLOCK_DIV128'],\n];\n\n/**\n * Arduino Uno board profile\n */\nexport const UNO: BoardProfile = {\n  name: 'Arduino Uno',\n  description: 'Arduino Uno standard compatible board',\n  compilerFlag: 'arduino:avr:uno',\n  image: '/boards/uno.png',\n  analogPins: generateAnalogIo(0, 5),\n  digitalPins: [...generateDigitalIo(0, 13), ...generateAnalogIo(0, 5)],\n  pwmPins: [\n    ['3', '3'],\n    ['5', '5'],\n    ['6', '6'],\n    ['9', '9'],\n    ['10', '10'],\n    ['11', '11'],\n  ],\n  serial: [['serial', 'Serial']],\n  serialPins: { Serial: [['RX', '0'], ['TX', '1']] },\n  serialSpeed: SERIAL_SPEEDS,\n  spi: [['SPI', 'SPI']],\n  spiPins: { SPI: [['MOSI', '11'], ['MISO', '12'], ['SCK', '13']] },\n  spiClockDivide: SPI_CLOCK_DIVIDES,\n  i2c: [['I2C', 'Wire']],\n  i2cPins: { Wire: [['SDA', 'A4'], ['SCL', 'A5']] },\n  i2cSpeed: [['100kHz', '100000L'], ['400kHz', '400000L']],\n  builtinLed: [['BUILTIN_1', '13']],\n  interrupt: [['interrupt0', '2'], ['interrupt1', '3']],\n  bootloader: 'uno',\n};\n\n/**\n * Arduino Nano board profile\n */\nexport const NANO: BoardProfile = {\n  name: 'Arduino Nano',\n  description: 'Arduino Nano with ATmega328p board',\n  compilerFlag: 'arduino:avr:nano',\n  image: '/boards/nano.png',\n  analogPins: generateAnalogIo(0, 7),\n  digitalPins: [...generateDigitalIo(0, 13), ...generateAnalogIo(0, 7)],\n  pwmPins: UNO.pwmPins,\n  serial: UNO.serial,\n  serialPins: UNO.serialPins,\n  serialSpeed: UNO.serialSpeed,\n  spi: UNO.spi,\n  spiPins: UNO.spiPins,\n  spiClockDivide: UNO.spiClockDivide,\n  i2c: UNO.i2c,\n  i2cPins: UNO.i2cPins,\n  i2cSpeed: UNO.i2cSpeed,\n  builtinLed: UNO.builtinLed,\n  interrupt: UNO.interrupt,\n  bootloader: 'nano',\n};\n\n/**\n * Arduino Mega board profile\n */\nexport const MEGA: BoardProfile = {\n  name: 'Arduino Mega',\n  description: 'Arduino Mega-compatible board',\n  compilerFlag: 'arduino:avr:mega:cpu=atmega2560',\n  image: '/boards/mega.png',\n  analogPins: generateAnalogIo(0, 15),\n  digitalPins: [...generateDigitalIo(0, 53), ...generateAnalogIo(0, 15)],\n  pwmPins: [...generateDigitalIo(2, 13), ...generateDigitalIo(44, 46)],\n  serial: [\n    ['serial', 'Serial'],\n    ['serial_1', 'Serial1'],\n    ['serial_2', 'Serial2'],\n    ['serial_3', 'Serial3'],\n  ],\n  serialPins: {\n    Serial: [['TX', '0'], ['RX', '1']],\n    Serial1: [['TX', '18'], ['RX', '19']],\n    Serial2: [['TX', '16'], ['RX', '17']],\n    Serial3: [['TX', '14'], ['RX', '15']],\n  },\n  serialSpeed: SERIAL_SPEEDS,\n  spi: [['SPI', 'SPI']],\n  spiPins: { SPI: [['MOSI', '51'], ['MISO', '50'], ['SCK', '52']] },\n  spiClockDivide: SPI_CLOCK_DIVIDES,\n  i2c: [['I2C', 'Wire']],\n  i2cPins: { Wire: [['SDA', '20'], ['SCL', '21']] },\n  i2cSpeed: [['100kHz', '100000L'], ['400kHz', '400000L']],\n  builtinLed: UNO.builtinLed,\n  interrupt: [\n    ['interrupt0', '2'],\n    ['interrupt1', '3'],\n    ['interrupt2', '21'],\n    ['interrupt3', '20'],\n    ['interrupt4', '19'],\n    ['interrupt5', '18'],\n  ],\n  bootloader: 'mega',\n};\n\n/**\n * Arduino Pro Mini board profile\n */\nexport const PRO_MINI: BoardProfile = {\n  name: 'Arduino Pro Mini',\n  description: 'Arduino Pro Mini with ATmega328p board',\n  compilerFlag: 'arduino:avr:pro:cpu=16MHzatmega328',\n  image: '/boards/pro.png',\n  analogPins: generateAnalogIo(0, 7),\n  digitalPins: [...generateDigitalIo(0, 13), ...generateAnalogIo(0, 7)],\n  pwmPins: UNO.pwmPins,\n  serial: UNO.serial,\n  serialPins: UNO.serialPins,\n  serialSpeed: UNO.serialSpeed,\n  spi: UNO.spi,\n  spiPins: UNO.spiPins,\n  spiClockDivide: UNO.spiClockDivide,\n  i2c: UNO.i2c,\n  i2cPins: UNO.i2cPins,\n  i2cSpeed: UNO.i2cSpeed,\n  builtinLed: UNO.builtinLed,\n  interrupt: UNO.interrupt,\n  bootloader: 'pro',\n};\n\n/**\n * ESP32 board profile\n */\nexport const ESP32: BoardProfile = {\n  name: 'ESP32',\n  description: 'ESP32 development board',\n  compilerFlag: 'esp32:esp32:esp32',\n  image: '/boards/esp32.png',\n  analogPins: [\n    ...generateAnalogIo(0, 19),\n    ['A32', '32'],\n    ['A33', '33'],\n    ['A34', '34'],\n    ['A35', '35'],\n    ['A36', '36'],\n    ['A39', '39'],\n  ],\n  digitalPins: [\n    ...generateDigitalIo(0, 5),\n    ...generateDigitalIo(12, 19),\n    ...generateDigitalIo(21, 23),\n    ...generateDigitalIo(25, 27),\n    ...generateDigitalIo(32, 33),\n  ],\n  pwmPins: generateDigitalIo(0, 33),\n  serial: [\n    ['serial', 'Serial'],\n    ['serial_1', 'Serial1'],\n    ['serial_2', 'Serial2'],\n  ],\n  serialPins: {\n    Serial: [['TX', '1'], ['RX', '3']],\n    Serial1: [['TX', '10'], ['RX', '9']],\n    Serial2: [['TX', '17'], ['RX', '16']],\n  },\n  serialSpeed: SERIAL_SPEEDS,\n  spi: [['SPI', 'SPI'], ['HSPI', 'HSPI'], ['VSPI', 'VSPI']],\n  spiPins: {\n    SPI: [['MOSI', '23'], ['MISO', '19'], ['SCK', '18']],\n    HSPI: [['MOSI', '13'], ['MISO', '12'], ['SCK', '14']],\n    VSPI: [['MOSI', '23'], ['MISO', '19'], ['SCK', '18']],\n  },\n  i2c: [['I2C', 'Wire']],\n  i2cPins: { Wire: [['SDA', '21'], ['SCL', '22']] },\n  i2cSpeed: [['100kHz', '100000L'], ['400kHz', '400000L']],\n  builtinLed: [['BUILTIN_1', '2']],\n  interrupt: generateDigitalIo(0, 39),\n};\n\n/**\n * ESP8266 board profile\n */\nexport const ESP8266: BoardProfile = {\n  name: 'ESP8266',\n  description: 'ESP8266 development board',\n  compilerFlag: 'esp8266:esp8266:generic',\n  image: '/boards/esp8266.png',\n  analogPins: [['A0', 'A0']],\n  digitalPins: [\n    ['D0', 'D0'],\n    ['D1', 'D1'],\n    ['D2', 'D2'],\n    ['D3', 'D3'],\n    ['D4', 'D4'],\n    ['D5', 'D5'],\n    ['D6', 'D6'],\n    ['D7', 'D7'],\n    ['D8', 'D8'],\n  ],\n  pwmPins: [\n    ['D1', 'D1'],\n    ['D2', 'D2'],\n    ['D3', 'D3'],\n    ['D4', 'D4'],\n    ['D5', 'D5'],\n    ['D6', 'D6'],\n    ['D7', 'D7'],\n    ['D8', 'D8'],\n  ],\n  serial: [['serial', 'Serial']],\n  serialPins: { Serial: [['RX', 'RX'], ['TX', 'TX']] },\n  serialSpeed: SERIAL_SPEEDS,\n  spi: [['SPI', 'SPI']],\n  spiPins: { SPI: [['MOSI', 'D7'], ['MISO', 'D6'], ['SCK', 'D5']] },\n  spiClockDivide: SPI_CLOCK_DIVIDES,\n  i2c: [['I2C', 'Wire']],\n  i2cPins: { Wire: [['SDA', 'D2'], ['SCL', 'D1']] },\n  i2cSpeed: UNO.i2cSpeed,\n  builtinLed: [['BUILTIN_1', 'D4']],\n  interrupt: [\n    ['D0', 'D0'],\n    ['D1', 'D1'],\n    ['D2', 'D2'],\n    ['D3', 'D3'],\n    ['D4', 'D4'],\n    ['D5', 'D5'],\n    ['D6', 'D6'],\n    ['D7', 'D7'],\n    ['D8', 'D8'],\n  ],\n};\n\n// ============================================================\n// Board Keys - Single Source of Truth\n// ============================================================\n\nexport const BOARD_KEYS = [\n  'arduino_uno',\n  'arduino_nano',\n  'arduino_mega',\n  'arduino_pro_mini',\n  'esp32',\n  'esp8266',\n] as const;\n\nexport type BoardKey = (typeof BOARD_KEYS)[number];\n\n/**\n * Collection of all available board profiles\n */\nexport const BOARD_PROFILES: Record<BoardKey, BoardProfile> = {\n  arduino_uno: UNO,\n  arduino_nano: NANO,\n  arduino_mega: MEGA,\n  arduino_pro_mini: PRO_MINI,\n  esp32: ESP32,\n  esp8266: ESP8266,\n};\n\n/**\n * Default board selection\n */\nexport let selectedBoard: BoardProfile = BOARD_PROFILES.arduino_uno;\n\n/**\n * Change the currently selected board\n */\nexport function changeBoard(boardKey: string): BoardProfile | null {\n  if (boardKey in BOARD_PROFILES) {\n    selectedBoard = BOARD_PROFILES[boardKey as BoardKey];\n    return selectedBoard;\n  }\n  console.warn(`Tried to set non-existing Arduino board: ${boardKey}`);\n  return null;\n}\n\n/**\n * Get the currently selected board\n */\nexport function getSelectedBoard(): BoardProfile {\n  return selectedBoard;\n}\n\n/**\n * Get all pins (digital + analog) from the selected board\n */\nexport function getAllPins(): [string, string][] {\n  return selectedBoard.digitalPins;\n}\n\n/**\n * Get all analog pins from the selected board\n */\nexport function getAllPinsAnalog(): [string, string][] {\n  return selectedBoard.analogPins;\n}\n\n/**\n * Arduino namespace for Blockly compatibility\n * Provides access to board data and utilities for blocks\n */\nexport const Arduino = {\n  get AllPins(): [string, string][] {\n    return getAllPins();\n  },\n  get AllPinsAnalog(): [string, string][] {\n    return getAllPinsAnalog();\n  },\n  get analogPins(): [string, string][] {\n    return getAllPinsAnalog();\n  },\n  get PwmPins(): [string, string][] {\n    return selectedBoard.pwmPins;\n  },\n  get BuiltinLed(): [string, string][] {\n    return selectedBoard.builtinLed;\n  },\n  get onlyVar(): [string, string][] {\n    // Placeholder for variable-only dropdown\n    // Return a default option to prevent empty array error\n    return [['', '']];\n  },\n  Boards: {\n    get selected(): BoardProfile {\n      return selectedBoard;\n    },\n    /**\n     * Refresh a block's field dropdown with updated board pin data or variables\n     */\n    refreshBlockFieldDropdown(block: any, fieldName: string, pinType: string, workspace?: any): void {\n      const field = block.getField(fieldName);\n      if (!field) return;\n\n      let pins: [string, string][];\n      switch (pinType) {\n        case 'AllPins':\n          pins = getAllPins();\n          break;\n        case 'AllPinsAnalog':\n        case 'analogPins':\n          pins = getAllPinsAnalog();\n          break;\n        case 'digitalPins':\n          pins = selectedBoard.digitalPins;\n          break;\n        case 'pwmPins':\n          pins = selectedBoard.pwmPins;\n          break;\n        case 'builtinLed':\n          pins = selectedBoard.builtinLed;\n          break;\n        case 'onlyVar':\n          // Get actual variables from workspace\n          if (!workspace) {\n            // Fallback when no workspace available\n            pins = [['', '']];\n            break;\n          }\n          // Get all variables from workspace\n          const variables = workspace.getVariableMap().getVariablesOfType('');\n          if (variables.length === 0) {\n            // No variables exist - show empty placeholder\n            pins = [['', '']];\n          } else {\n            // Map variables to dropdown format [display, value]\n            pins = variables.map((v: any) => [v.getName(), v.getName()]);\n          }\n          break;\n        default:\n          pins = [];\n      }\n\n      if (pins.length > 0 && field.menuGenerator_) {\n        field.menuGenerator_ = pins;\n      }\n    },\n  },\n};\n"],"mappings":"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","names":[]}