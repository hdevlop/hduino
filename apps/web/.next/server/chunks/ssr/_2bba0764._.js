module.exports=[71728,a=>{"use strict";var b=a.i(33670),c=a.i(48026),d=a.i(53884);function e(){let{isDirty:a,saveProject:e,currentProject:f}=(0,c.useEditorStore)(),g=(0,b.useRef)(null),h=(0,b.useRef)(!1);(0,b.useEffect)(()=>{if(f&&a&&!h.current)return g.current&&clearTimeout(g.current),g.current=setTimeout(async()=>{h.current=!0;try{await e(!0)}finally{h.current=!1}},3e3),()=>{g.current&&clearTimeout(g.current)}},[a,f,e]),(0,b.useEffect)(()=>{if(!f)return;let b=async b=>{if(a&&!h.current){b.preventDefault(),h.current=!0;try{await e(!0),d.toast.success("Auto-saved",{description:"Your work has been saved",duration:2e3})}catch(a){console.error("[useAutoSave] Failed to save on unload:",a),d.toast.error("Failed to save",{description:"Could not save your changes"})}finally{h.current=!1}}};return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},[a,f,e])}a.s(["useAutoSave",()=>e])},9860,a=>{"use strict";var b,c=a.i(33670),d="u">typeof document;let e=function(){if(void 0!==b)return b;if(!d)return b=!1,!1;var a=!1,c={get passive(){a=!0}},e=function(){};return window.addEventListener("t",e,c),window.removeEventListener("t",e,c),b=a,a};var f="u">typeof document?c.useLayoutEffect:function(){},g=function(a){var b=c.default.useRef(a);return f(function(){b.current=a}),b},h="touchstart",i=["mousedown",h],j=function(a){if(a===h&&e())return{passive:!0}},k="u">typeof document?document:void 0;function l(a,b,d){var e=(void 0===d?{}:d).document,f=void 0===e?k:e;if(void 0!==f){var h=g(b);(0,c.useEffect)(function(){if(b){var c=function(b){!a.current||!h.current||a.current.contains(b.target)||h.current(b)};return i.forEach(function(a){f.addEventListener(a,c,j(a))}),function(){i.forEach(function(a){f.removeEventListener(a,c)})}}},[!b])}}a.s(["default",()=>l],9860)},28207,a=>a.a(async(b,c)=>{try{var d=a.i(9881),e=a.i(48026),f=a.i(71728),g=a.i(38034),h=a.i(33670),i=a.i(94448),j=a.i(20124),k=a.i(82007),l=a.i(92054),m=a.i(92010),n=a.i(9860),o=b([i,k]);function p(){let{currentProject:a,isDirty:b,generatedCode:c,selectedCategory:i,isCodePanelOpen:o,closeProject:p,selectCategory:q,toggleCodePanel:r,copyCodeToClipboard:s,undo:t,redo:u}=(0,e.useEditorStore)(),v=(0,h.useRef)(null);if((0,f.useAutoSave)(),(0,n.default)(v,()=>{i&&q(null)}),(0,h.useEffect)(()=>{let a=a=>{(a.ctrlKey||a.metaKey)&&"z"===a.key&&!a.shiftKey&&(a.preventDefault(),t()),((a.ctrlKey||a.metaKey)&&"y"===a.key||(a.ctrlKey||a.metaKey)&&a.shiftKey&&"z"===a.key)&&(a.preventDefault(),u())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t,u]),!a)return null;let w=async()=>{await s()};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"h-screen w-screen flex flex-col overflow-hidden",children:[(0,d.jsx)(g.EditorToolbar,{project:a,isDirty:b,isCodePanelOpen:o,onToggleCodePanel:r,onClose:p}),(0,d.jsxs)("div",{className:"flex relative flex-1 overflow-hidden h-full",children:[(0,d.jsx)(j.CategorySidebar,{selectedCategory:i,onSelectCategory:a=>{a===i?q(null):q(a)}}),(0,d.jsx)(l.WorkspaceContainer,{}),o&&(0,d.jsx)(k.CodePanel,{code:c,onCopy:w,onClose:r})]})]}),(0,d.jsx)(m.VariableDialog,{})]})}[i,k]=o.then?(await o)():o,a.s(["default",()=>p]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_2bba0764._.js.map